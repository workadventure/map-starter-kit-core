<!DOCTYPE html>
<html lang="en">

{{> head}}

<body>
<div class="content">
    {{> header}}
    <main>
        <section class="form-center">
            <h1>
                How do you want to publish your map?
            </h1>
            <div class="sub-heading">
                Choose the workflow that best fits your team and your way of working.
            </div>
            <div class="radio-wrapper">
                <label class="radio-card">
                    <input name="advanced" class="radio" type="radio" checked>
                    <div class="card-details">
                        <svg width="39" height="39" viewBox="0 0 39 39" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M8.125 19.5L16.25 27.625L32.5 11.375" stroke="#4156F6" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>

                        <h2>
                            Local publishing
                        </h2>
                        <div>
                            <strong>The easiest and fastest way to publish your map.</strong>
                            Push your map files directly from your computer to WorkAdventure.<br/>
                            No technical setup required. Ideal for getting started quickly.
                        </div>
                    </div>
                </label>
                <label class="radio-card">
                    <input name="advanced" class="radio" type="radio">
                    <div class="card-details">
                        <svg width="39" height="39" viewBox="0 0 39 39" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M8.125 19.5L16.25 27.625L32.5 11.375" stroke="#4156F6" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>

                        <h2>
                            Advanced publishing
                        </h2>
                        <div>
                            <strong>Designed for teams using Git and file versioning.</strong>
                            Push your maps in a shared GitHub repository.<br/>
                            A continuous integration workflow automatically publishes your map.
                        </div>
                    </div>
                </label>
            </div>

        </section>
    </main>
    <div class="button-wrapper">
        <div>
            <a href="/" class="btn btn-ghost">
                Previous
            </a>
        </div>
        <div style="flex-grow: 1;">
        </div>
        <div>
            <a href="step2-hosting" class="btn btn-secondary">
                Start configuration
            </a>
        </div>
    </div>
</div>
{{> footer}}
<script>
    // Get radio buttons by finding the label containing "Advanced publishing"
    const radioButtons = document.querySelectorAll('input[name="advanced"]');
    const startConfigButton = document.querySelector('a[href="step2-hosting"]');
    const docUrl = "https://docs.workadventu.re/map-building/tiled-editor/publish/wa-hosted";

    // Find Advanced publishing radio button by checking parent label text
    let advancedPublishingRadio = null;
    radioButtons.forEach(radio => {
        const label = radio.closest('label');
        if (label && label.textContent.includes('Advanced publishing')) {
            advancedPublishingRadio = radio;
        }
    });

    // Function to update button href based on selection
    function updateButtonHref() {
        // Check if Advanced publishing is selected
        if (advancedPublishingRadio && advancedPublishingRadio.checked) {
            startConfigButton.href = docUrl;
            startConfigButton.target = "_blank";
        } else {
            startConfigButton.href = "step2-hosting";
            startConfigButton.removeAttribute("target");
        }
    }

    // Add event listeners to all radio buttons
    radioButtons.forEach(radio => {
        radio.addEventListener('change', updateButtonHref);
    });

    // Initialize on page load
    updateButtonHref();
</script>
</body>

</html>