<!DOCTYPE html>
<html lang="en">

{{> head}}

<body>
<div class="content">
    {{> header}}
    <main>
        <section class="form-center">
            <h1>
                Which version of WorkAdventure do you use?
            </h1>
            <div class="sub-heading">
                Choose the setup that matches how you use WorkAdventure. This will help us adapt the publishing process.
            </div>
            <div class="radio-wrapper">
                <label class="radio-card">
                    <input name="advanced" class="radio" type="radio">
                    <div class="card-details">
                        <svg width="39" height="39" viewBox="0 0 39 39" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M8.125 19.5L16.25 27.625L32.5 11.375" stroke="#4156F6" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>

                        <h2>
                            I use the online version (SaaS)
                        </h2>
                        <div>
                            Your map is published on the WorkAdventure platform.
                            <strong>We handle hosting, updates, and infrastructure for you.</strong>
                        </div>
                    </div>
                </label>
                <label class="radio-card">
                    <input name="advanced" class="radio" type="radio">
                    <div class="card-details">
                        <svg width="39" height="39" viewBox="0 0 39 39" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M8.125 19.5L16.25 27.625L32.5 11.375" stroke="#4156F6" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>

                        <h2>
                            I'm self-hosting WorkAdventure
                        </h2>
                        <div>
                            Your map is published on your own WorkAdventure server.
                            <strong>You manage the hosting, configuration, and updates yourself.</strong>
                        </div>
                    </div>
                </label>
            </div>

        </section>
    </main>
    <div class="button-wrapper">
        <div>
            <a href="step1-git" class="btn btn-ghost">
                Previous
            </a>
        </div>
        <div style="flex-grow: 1;">
        </div>
        <div>
            <a href="step3-steps" class="btn btn-secondary">
                Configure
            </a>
        </div>
    </div>
</div>
{{> footer}}
<script>
    // Get radio buttons by finding the label containing "I use self-hosted"
    const radioButtons = document.querySelectorAll('input[name="advanced"]');
    const configureButton = document.querySelector('a[href="step3-steps"]');

    // Find "I use self-hosted" radio button by checking parent label text
    let selfHostedRadio = null;
    radioButtons.forEach(radio => {
        const label = radio.closest('label');
        if (label && label.textContent.includes('I\'m self-hosting WorkAdventure')) {
            selfHostedRadio = radio;
        }
    });

    // Function to update button href based on selection
    function updateButtonHref() {
        // Check if "I use self-hosted" is selected
        if (selfHostedRadio && selfHostedRadio.checked) {
            configureButton.href = "step3-steps-selfhosted";
            configureButton.removeAttribute("target");
        } else {
            configureButton.href = "step3-steps";
            configureButton.removeAttribute("target");
        }
    }

    // Add event listeners to all radio buttons
    radioButtons.forEach(radio => {
        radio.addEventListener('change', updateButtonHref);
    });

    // Initialize on page load
    updateButtonHref();
</script>
</body>

</html>